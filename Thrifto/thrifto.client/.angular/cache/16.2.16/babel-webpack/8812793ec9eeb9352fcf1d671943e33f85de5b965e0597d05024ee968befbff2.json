{"ast":null,"code":"import { __decorate } from \"tslib\";\n// src/app/components/new-listings/new-listings.component.ts\nimport { trigger, style, transition, animate } from '@angular/animations';\nimport { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { Subject, BehaviorSubject } from 'rxjs';\nimport { takeUntil, debounceTime, distinctUntilChanged } from 'rxjs/operators';\nexport let NewListingsComponent = class NewListingsComponent {\n  constructor(listingService, router, route, paginationService) {\n    this.listingService = listingService;\n    this.router = router;\n    this.route = route;\n    this.paginationService = paginationService;\n    this.destroy$ = new Subject();\n    this.filterChange$ = new BehaviorSubject(undefined);\n    // Core data\n    this.listings = [];\n    this.isLoading = false;\n    this.totalItemsCount = 1250;\n    // View and display\n    this.viewMode = 'grid';\n    this.isCompactMode = false;\n    this.showAdvancedFilters = false;\n    // Filtering and sorting\n    this.sortBy = 'newest';\n    this.selectedQuality = '';\n    this.selectedSizes = [];\n    this.selectedCategories = [];\n    this.priceRange = {\n      min: 0,\n      max: 500\n    };\n    this.hoveredQuality = '';\n    this.showFavoritesOnly = false;\n    // Search and discovery\n    this.popularTags = ['Vintage Denim', 'Designer Bags', 'Sustainable Cotton', 'Retro Style', 'Bohemian', 'Minimalist', 'Vintage Leather', 'Eco-Friendly'];\n    this.alternativeSearches = ['Casual Wear', 'Formal Attire', 'Seasonal Items', 'Accessories', 'Outerwear', 'Footwear', 'Jewelry', 'Designer Pieces'];\n    // Animation particles for hero\n    this.sustainabilityParticles = [{\n      icon: 'fas fa-leaf'\n    }, {\n      icon: 'fas fa-recycle'\n    }, {\n      icon: 'fas fa-heart'\n    }, {\n      icon: 'fas fa-globe-americas'\n    }, {\n      icon: 'fas fa-tree'\n    }];\n    // Configuration data\n    this.qualities = [{\n      label: 'New',\n      value: 'NEW',\n      count: 245\n    }, {\n      label: 'Like New',\n      value: 'LIKE NEW',\n      count: 189\n    }, {\n      label: 'Barely Worn',\n      value: 'BARELY WORN',\n      count: 334\n    }, {\n      label: 'Used',\n      value: 'USED',\n      count: 456\n    }];\n    this.availableSizes = ['XS', 'S', 'M', 'L', 'XL', 'XXL', '6', '8', '10', '12', '14', '16'];\n    this.categories = [{\n      label: 'Dresses',\n      value: 'dresses',\n      icon: 'fas fa-tshirt',\n      count: 234\n    }, {\n      label: 'Tops',\n      value: 'tops',\n      icon: 'fas fa-tshirt',\n      count: 189\n    }, {\n      label: 'Bottoms',\n      value: 'bottoms',\n      icon: 'fas fa-tshirt',\n      count: 156\n    }, {\n      label: 'Outerwear',\n      value: 'outerwear',\n      icon: 'fas fa-jacket',\n      count: 98\n    }, {\n      label: 'Shoes',\n      value: 'shoes',\n      icon: 'fas fa-shoe-prints',\n      count: 145\n    }, {\n      label: 'Accessories',\n      value: 'accessories',\n      icon: 'fas fa-gem',\n      count: 203\n    }];\n    // Favorites simulation (would come from user service)\n    this.favoriteIds = new Set();\n  }\n  ngOnInit() {\n    this.initializeFilters();\n    this.setupFilterFlow();\n    this.loadListings();\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  initializeFilters() {\n    // Initialize from query params\n    this.route.queryParams.pipe(takeUntil(this.destroy$)).subscribe(params => {\n      this.selectedQuality = params['quality'] || '';\n      this.sortBy = params['sort'] || 'newest';\n      // Reset pagination when filters change\n      this.paginationService.reset();\n      this.listings = [];\n      this.filterChange$.next();\n    });\n  }\n  setupFilterFlow() {\n    // Debounce filter changes to prevent excessive API calls\n    this.filterChange$.pipe(takeUntil(this.destroy$), debounceTime(300), distinctUntilChanged()).subscribe(() => {\n      this.loadListings();\n    });\n  }\n  loadListings() {\n    if (this.isLoading) return;\n    this.isLoading = true;\n    this.paginationService.setLoading(true);\n    const params = this.buildApiParams();\n    this.listingService.getListings(params).subscribe({\n      next: response => {\n        if (this.paginationService.currentPage === 1) {\n          this.listings = response.items;\n        } else {\n          this.listings = [...this.listings, ...response.items];\n        }\n        this.paginationService.setTotalCount(response.totalCount);\n        this.isLoading = false;\n        this.paginationService.setLoading(false);\n      },\n      error: error => {\n        console.error('Error loading listings', error);\n        this.handleLoadingError(error);\n      }\n    });\n  }\n  buildApiParams() {\n    const params = {\n      page: this.paginationService.currentPage,\n      pageSize: this.paginationService.currentPageSize\n    };\n    if (this.selectedQuality) params.quality = this.selectedQuality;\n    if (this.sortBy !== 'newest') params.sortBy = this.sortBy;\n    if (this.selectedSizes.length > 0) params.sizes = this.selectedSizes.join(',');\n    if (this.selectedCategories.length > 0) params.categories = this.selectedCategories.join(',');\n    if (this.priceRange.min > 0 || this.priceRange.max < 500) {\n      params.priceMin = this.priceRange.min;\n      params.priceMax = this.priceRange.max;\n    }\n    return params;\n  }\n  handleLoadingError(error) {\n    this.isLoading = false;\n    this.paginationService.setLoading(false);\n    // Could show user-friendly error message here\n  }\n  // Filter Management\n  selectQuality(quality) {\n    this.selectedQuality = this.selectedQuality === quality ? '' : quality;\n    this.resetPaginationAndFilter();\n  }\n  toggleSize(size) {\n    const index = this.selectedSizes.indexOf(size);\n    if (index > -1) {\n      this.selectedSizes.splice(index, 1);\n    } else {\n      this.selectedSizes.push(size);\n    }\n    this.resetPaginationAndFilter();\n  }\n  toggleCategory(category) {\n    const index = this.selectedCategories.indexOf(category);\n    if (index > -1) {\n      this.selectedCategories.splice(index, 1);\n    } else {\n      this.selectedCategories.push(category);\n    }\n    this.resetPaginationAndFilter();\n  }\n  onPriceChange() {\n    // Debounced through filterChange$ stream\n    this.resetPaginationAndFilter();\n  }\n  onSortChange() {\n    this.resetPaginationAndFilter();\n    this.updateQueryParams();\n  }\n  clearQualityFilter() {\n    this.selectedQuality = '';\n    this.resetPaginationAndFilter();\n  }\n  clearAllFilters() {\n    this.selectedQuality = '';\n    this.selectedSizes = [];\n    this.selectedCategories = [];\n    this.priceRange = {\n      min: 0,\n      max: 500\n    };\n    this.sortBy = 'newest';\n    this.showFavoritesOnly = false;\n    this.resetPaginationAndFilter();\n    this.updateQueryParams();\n  }\n  resetPaginationAndFilter() {\n    this.paginationService.reset();\n    this.listings = [];\n    this.filterChange$.next();\n  }\n  updateQueryParams() {\n    const queryParams = {};\n    if (this.selectedQuality) queryParams.quality = this.selectedQuality;\n    if (this.sortBy !== 'newest') queryParams.sort = this.sortBy;\n    this.router.navigate([], {\n      relativeTo: this.route,\n      queryParams: queryParams,\n      replaceUrl: true\n    });\n  }\n  // View Management\n  setViewMode(mode) {\n    this.viewMode = mode;\n  }\n  toggleAdvancedFilters() {\n    this.showAdvancedFilters = !this.showAdvancedFilters;\n  }\n  toggleFavoritesOnly() {\n    this.showFavoritesOnly = !this.showFavoritesOnly;\n    // Would filter listings by favorites here\n  }\n  // Search and Discovery\n  onSearch(query) {\n    this.router.navigate(['/search'], {\n      queryParams: {\n        q: query\n      }\n    });\n  }\n  searchByTag(tag) {\n    this.router.navigate(['/search'], {\n      queryParams: {\n        q: tag\n      }\n    });\n  }\n  shuffleResults() {\n    // Shuffle current listings for fun discovery\n    const shuffled = [...this.listings];\n    for (let i = shuffled.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n    }\n    this.listings = shuffled;\n  }\n  exploreRecommendations() {\n    // Would show AI-powered recommendations\n    this.clearAllFilters();\n    this.sortBy = 'popularity';\n    this.onSortChange();\n  }\n  exploreMoreCategories() {\n    this.router.navigate(['/categories']);\n  }\n  // Item Interactions\n  viewListingDetails(id) {\n    const listing = this.listings.find(l => l.id === id);\n    if (listing) {\n      this.router.navigate(['/listing', id], {\n        state: {\n          listing: listing\n        }\n      });\n    } else {\n      this.router.navigate(['/listing', id]);\n    }\n  }\n  onListingHover(listing) {\n    // Could preload listing details or show preview\n  }\n  onListingLeave() {\n    // Reset any hover states\n  }\n  toggleFavorite(id, event) {\n    event.stopPropagation();\n    if (this.favoriteIds.has(id)) {\n      this.favoriteIds.delete(id);\n    } else {\n      this.favoriteIds.add(id);\n    }\n    // Would sync with user service\n  }\n\n  shareItem(listing, event) {\n    event.stopPropagation();\n    // Implement sharing functionality\n    if (navigator.share) {\n      navigator.share({\n        title: listing.title,\n        text: `Check out this ${listing.quality.toLowerCase()} ${listing.title.toLowerCase()}!`,\n        url: window.location.origin + `/listing/${listing.id}`\n      });\n    }\n  }\n  // Pagination\n  onScroll() {\n    if (!this.isLoading && this.paginationService.hasMoreItems) {\n      this.paginationService.nextPage();\n      this.filterChange$.next();\n    }\n  }\n  loadMoreManually() {\n    this.paginationService.nextPage();\n    this.filterChange$.next();\n  }\n  // Utility Methods\n  trackByListingId(index, listing) {\n    return listing.id;\n  }\n  isFavorite(id) {\n    return this.favoriteIds.has(id);\n  }\n  getImageUrl(url) {\n    return url || 'assets/images/placeholder.png';\n  }\n  getTimeAgo(date) {\n    const now = new Date();\n    const diffMs = now.getTime() - new Date(date).getTime();\n    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n    if (diffDays === 0) return 'Today';\n    if (diffDays === 1) return 'Yesterday';\n    if (diffDays < 7) return `${diffDays}d ago`;\n    return `${Math.floor(diffDays / 7)}w ago`;\n  }\n  getQualityClass(quality) {\n    return quality.toLowerCase().replace(/\\s+/g, '-');\n  }\n  getQualityIcon(quality) {\n    const icons = {\n      'NEW': 'fas fa-star',\n      'LIKE NEW': 'fas fa-gem',\n      'BARELY WORN': 'fas fa-heart',\n      'USED': 'fas fa-leaf'\n    };\n    return icons[quality] || 'fas fa-tag';\n  }\n  getQualityLabel(value) {\n    const quality = this.qualities.find(q => q.value === value);\n    return quality ? quality.label : value;\n  }\n  getQualityCount(quality) {\n    const qualityOption = this.qualities.find(q => q.value === quality);\n    return qualityOption ? qualityOption.count || 0 : 0;\n  }\n  getCategoryLabel(value) {\n    const category = this.categories.find(c => c.value === value);\n    return category ? category.label : value;\n  }\n  getListingPreview(listing) {\n    if (listing.description && listing.description.length > 0) {\n      return listing.description.substring(0, 120) + '...';\n    }\n    return `This ${listing.quality.toLowerCase()} ${listing.title.toLowerCase()} is ready for its next adventure.`;\n  }\n  getStoryExcerpt(listing) {\n    if (listing.description && listing.description.length > 0) {\n      return listing.description.substring(0, 80) + '...';\n    }\n    return `A beautiful ${listing.quality.toLowerCase()} piece with character and style.`;\n  }\n  getResultsTitle() {\n    if (this.hasActiveFilters) {\n      return 'Filtered Discoveries';\n    }\n    return 'Latest Marketplace Treasures';\n  }\n  getActiveFiltersCount() {\n    let count = 0;\n    if (this.selectedQuality) count++;\n    if (this.selectedSizes.length > 0) count++;\n    if (this.selectedCategories.length > 0) count++;\n    if (this.priceRange.min > 0 || this.priceRange.max < 500) count++;\n    if (this.sortBy !== 'newest') count++;\n    return count;\n  }\n  calculateSustainabilityScore() {\n    // Mock calculation based on filters and selections\n    let score = 75; // Base sustainability score\n    if (this.selectedQuality === 'USED') score += 15;\n    if (this.selectedQuality === 'BARELY WORN') score += 10;\n    if (this.selectedCategories.includes('sustainable')) score += 10;\n    return Math.min(score, 100);\n  }\n  get hasActiveFilters() {\n    return this.getActiveFiltersCount() > 0;\n  }\n};\nNewListingsComponent = __decorate([Component({\n  selector: 'app-new-listings',\n  templateUrl: './new-listings.component.html',\n  styleUrls: ['./new-listings.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [trigger('slideDown', [transition(':enter', [style({\n    opacity: 0,\n    transform: 'translateY(-20px)'\n  }), animate('0.3s ease-out', style({\n    opacity: 1,\n    transform: 'translateY(0)'\n  }))]), transition(':leave', [animate('0.3s ease-in', style({\n    opacity: 0,\n    transform: 'translateY(-20px)'\n  }))])])]\n})], NewListingsComponent);","map":{"version":3,"names":["trigger","style","transition","animate","Component","ChangeDetectionStrategy","Subject","BehaviorSubject","takeUntil","debounceTime","distinctUntilChanged","NewListingsComponent","constructor","listingService","router","route","paginationService","destroy$","filterChange$","undefined","listings","isLoading","totalItemsCount","viewMode","isCompactMode","showAdvancedFilters","sortBy","selectedQuality","selectedSizes","selectedCategories","priceRange","min","max","hoveredQuality","showFavoritesOnly","popularTags","alternativeSearches","sustainabilityParticles","icon","qualities","label","value","count","availableSizes","categories","favoriteIds","Set","ngOnInit","initializeFilters","setupFilterFlow","loadListings","ngOnDestroy","next","complete","queryParams","pipe","subscribe","params","reset","setLoading","buildApiParams","getListings","response","currentPage","items","setTotalCount","totalCount","error","console","handleLoadingError","page","pageSize","currentPageSize","quality","length","sizes","join","priceMin","priceMax","selectQuality","resetPaginationAndFilter","toggleSize","size","index","indexOf","splice","push","toggleCategory","category","onPriceChange","onSortChange","updateQueryParams","clearQualityFilter","clearAllFilters","sort","navigate","relativeTo","replaceUrl","setViewMode","mode","toggleAdvancedFilters","toggleFavoritesOnly","onSearch","query","q","searchByTag","tag","shuffleResults","shuffled","i","j","Math","floor","random","exploreRecommendations","exploreMoreCategories","viewListingDetails","id","listing","find","l","state","onListingHover","onListingLeave","toggleFavorite","event","stopPropagation","has","delete","add","shareItem","navigator","share","title","text","toLowerCase","url","window","location","origin","onScroll","hasMoreItems","nextPage","loadMoreManually","trackByListingId","isFavorite","getImageUrl","getTimeAgo","date","now","Date","diffMs","getTime","diffDays","getQualityClass","replace","getQualityIcon","icons","getQualityLabel","getQualityCount","qualityOption","getCategoryLabel","c","getListingPreview","description","substring","getStoryExcerpt","getResultsTitle","hasActiveFilters","getActiveFiltersCount","calculateSustainabilityScore","score","includes","__decorate","selector","templateUrl","styleUrls","changeDetection","OnPush","animations","opacity","transform"],"sources":["C:\\Users\\leust\\source\\repos\\MPP-main\\Thrifto\\thrifto.client\\src\\app\\components\\new-listings\\new-listings.component.ts"],"sourcesContent":["// src/app/components/new-listings/new-listings.component.ts\r\nimport {\r\n    trigger,\r\n    state,\r\n    style,\r\n    transition,\r\n    animate\r\n} from '@angular/animations';\r\n\r\nimport {\r\n    Component,\r\n    OnInit,\r\n    OnDestroy,\r\n    ChangeDetectionStrategy\r\n} from '@angular/core';\r\n\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Subject, combineLatest, BehaviorSubject } from 'rxjs';\r\nimport { takeUntil, debounceTime, distinctUntilChanged } from 'rxjs/operators';\r\nimport { ListingService } from '../../services/listing.service';\r\nimport { PaginationService } from '../../services/pagination.service';\r\nimport { Listing } from '../../models/listing.model';\r\n\r\nexport type ViewMode = 'grid' | 'list' | 'magazine';\r\nexport type SortOption = 'newest' | 'price_asc' | 'price_desc' | 'popularity' | 'sustainability';\r\n\r\ninterface QualityOption {\r\n    label: string;\r\n    value: string;\r\n    icon?: string;\r\n    count?: number;\r\n}\r\n\r\ninterface CategoryOption {\r\n    label: string;\r\n    value: string;\r\n    icon: string;\r\n    count: number;\r\n}\r\n\r\ninterface PriceRange {\r\n    min: number;\r\n    max: number;\r\n}\r\n\r\n@Component({\r\n    selector: 'app-new-listings',\r\n    templateUrl: './new-listings.component.html',\r\n    styleUrls: ['./new-listings.component.scss'],\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    animations: [\r\n        trigger('slideDown', [\r\n            transition(':enter', [\r\n                style({ opacity: 0, transform: 'translateY(-20px)' }),\r\n                animate('0.3s ease-out', style({ opacity: 1, transform: 'translateY(0)' }))\r\n            ]),\r\n            transition(':leave', [\r\n                animate('0.3s ease-in', style({ opacity: 0, transform: 'translateY(-20px)' }))\r\n            ])\r\n        ])\r\n    ]\r\n})\r\nexport class NewListingsComponent implements OnInit, OnDestroy {\r\n    private destroy$ = new Subject<void>();\r\n    private filterChange$ = new BehaviorSubject<void>(undefined);\r\n\r\n    // Core data\r\n    listings: Listing[] = [];\r\n    isLoading = false;\r\n    totalItemsCount = 1250;\r\n\r\n    // View and display\r\n    viewMode: ViewMode = 'grid';\r\n    isCompactMode = false;\r\n    showAdvancedFilters = false;\r\n\r\n    // Filtering and sorting\r\n    sortBy: SortOption = 'newest';\r\n    selectedQuality = '';\r\n    selectedSizes: string[] = [];\r\n    selectedCategories: string[] = [];\r\n    priceRange: PriceRange = { min: 0, max: 500 };\r\n    hoveredQuality = '';\r\n    showFavoritesOnly = false;\r\n\r\n    // Search and discovery\r\n    popularTags = [\r\n        'Vintage Denim', 'Designer Bags', 'Sustainable Cotton', 'Retro Style',\r\n        'Bohemian', 'Minimalist', 'Vintage Leather', 'Eco-Friendly'\r\n    ];\r\n\r\n    alternativeSearches = [\r\n        'Casual Wear', 'Formal Attire', 'Seasonal Items', 'Accessories',\r\n        'Outerwear', 'Footwear', 'Jewelry', 'Designer Pieces'\r\n    ];\r\n\r\n    // Animation particles for hero\r\n    sustainabilityParticles = [\r\n        { icon: 'fas fa-leaf' },\r\n        { icon: 'fas fa-recycle' },\r\n        { icon: 'fas fa-heart' },\r\n        { icon: 'fas fa-globe-americas' },\r\n        { icon: 'fas fa-tree' }\r\n    ];\r\n\r\n    // Configuration data\r\n    qualities: QualityOption[] = [\r\n        { label: 'New', value: 'NEW', count: 245 },\r\n        { label: 'Like New', value: 'LIKE NEW', count: 189 },\r\n        { label: 'Barely Worn', value: 'BARELY WORN', count: 334 },\r\n        { label: 'Used', value: 'USED', count: 456 }\r\n    ];\r\n\r\n    availableSizes = ['XS', 'S', 'M', 'L', 'XL', 'XXL', '6', '8', '10', '12', '14', '16'];\r\n\r\n    categories: CategoryOption[] = [\r\n        { label: 'Dresses', value: 'dresses', icon: 'fas fa-tshirt', count: 234 },\r\n        { label: 'Tops', value: 'tops', icon: 'fas fa-tshirt', count: 189 },\r\n        { label: 'Bottoms', value: 'bottoms', icon: 'fas fa-tshirt', count: 156 },\r\n        { label: 'Outerwear', value: 'outerwear', icon: 'fas fa-jacket', count: 98 },\r\n        { label: 'Shoes', value: 'shoes', icon: 'fas fa-shoe-prints', count: 145 },\r\n        { label: 'Accessories', value: 'accessories', icon: 'fas fa-gem', count: 203 }\r\n    ];\r\n\r\n    // Favorites simulation (would come from user service)\r\n    private favoriteIds = new Set<number>();\r\n\r\n    constructor(\r\n        private listingService: ListingService,\r\n        private router: Router,\r\n        private route: ActivatedRoute,\r\n        public paginationService: PaginationService\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n        this.initializeFilters();\r\n        this.setupFilterFlow();\r\n        this.loadListings();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.destroy$.next();\r\n        this.destroy$.complete();\r\n    }\r\n\r\n    private initializeFilters(): void {\r\n        // Initialize from query params\r\n        this.route.queryParams.pipe(\r\n            takeUntil(this.destroy$)\r\n        ).subscribe(params => {\r\n            this.selectedQuality = params['quality'] || '';\r\n            this.sortBy = params['sort'] || 'newest';\r\n\r\n            // Reset pagination when filters change\r\n            this.paginationService.reset();\r\n            this.listings = [];\r\n            this.filterChange$.next();\r\n        });\r\n    }\r\n\r\n    private setupFilterFlow(): void {\r\n        // Debounce filter changes to prevent excessive API calls\r\n        this.filterChange$.pipe(\r\n            takeUntil(this.destroy$),\r\n            debounceTime(300),\r\n            distinctUntilChanged()\r\n        ).subscribe(() => {\r\n            this.loadListings();\r\n        });\r\n    }\r\n\r\n    private loadListings(): void {\r\n        if (this.isLoading) return;\r\n\r\n        this.isLoading = true;\r\n        this.paginationService.setLoading(true);\r\n\r\n        const params = this.buildApiParams();\r\n\r\n        this.listingService.getListings(params).subscribe({\r\n            next: (response) => {\r\n                if (this.paginationService.currentPage === 1) {\r\n                    this.listings = response.items;\r\n                } else {\r\n                    this.listings = [...this.listings, ...response.items];\r\n                }\r\n\r\n                this.paginationService.setTotalCount(response.totalCount);\r\n                this.isLoading = false;\r\n                this.paginationService.setLoading(false);\r\n            },\r\n            error: (error) => {\r\n                console.error('Error loading listings', error);\r\n                this.handleLoadingError(error);\r\n            }\r\n        });\r\n    }\r\n\r\n    private buildApiParams(): any {\r\n        const params: any = {\r\n            page: this.paginationService.currentPage,\r\n            pageSize: this.paginationService.currentPageSize\r\n        };\r\n\r\n        if (this.selectedQuality) params.quality = this.selectedQuality;\r\n        if (this.sortBy !== 'newest') params.sortBy = this.sortBy;\r\n        if (this.selectedSizes.length > 0) params.sizes = this.selectedSizes.join(',');\r\n        if (this.selectedCategories.length > 0) params.categories = this.selectedCategories.join(',');\r\n        if (this.priceRange.min > 0 || this.priceRange.max < 500) {\r\n            params.priceMin = this.priceRange.min;\r\n            params.priceMax = this.priceRange.max;\r\n        }\r\n\r\n        return params;\r\n    }\r\n\r\n    private handleLoadingError(error: any): void {\r\n        this.isLoading = false;\r\n        this.paginationService.setLoading(false);\r\n        // Could show user-friendly error message here\r\n    }\r\n\r\n    // Filter Management\r\n    selectQuality(quality: string): void {\r\n        this.selectedQuality = this.selectedQuality === quality ? '' : quality;\r\n        this.resetPaginationAndFilter();\r\n    }\r\n\r\n    toggleSize(size: string): void {\r\n        const index = this.selectedSizes.indexOf(size);\r\n        if (index > -1) {\r\n            this.selectedSizes.splice(index, 1);\r\n        } else {\r\n            this.selectedSizes.push(size);\r\n        }\r\n        this.resetPaginationAndFilter();\r\n    }\r\n\r\n    toggleCategory(category: string): void {\r\n        const index = this.selectedCategories.indexOf(category);\r\n        if (index > -1) {\r\n            this.selectedCategories.splice(index, 1);\r\n        } else {\r\n            this.selectedCategories.push(category);\r\n        }\r\n        this.resetPaginationAndFilter();\r\n    }\r\n\r\n    onPriceChange(): void {\r\n        // Debounced through filterChange$ stream\r\n        this.resetPaginationAndFilter();\r\n    }\r\n\r\n    onSortChange(): void {\r\n        this.resetPaginationAndFilter();\r\n        this.updateQueryParams();\r\n    }\r\n\r\n    clearQualityFilter(): void {\r\n        this.selectedQuality = '';\r\n        this.resetPaginationAndFilter();\r\n    }\r\n\r\n    clearAllFilters(): void {\r\n        this.selectedQuality = '';\r\n        this.selectedSizes = [];\r\n        this.selectedCategories = [];\r\n        this.priceRange = { min: 0, max: 500 };\r\n        this.sortBy = 'newest';\r\n        this.showFavoritesOnly = false;\r\n        this.resetPaginationAndFilter();\r\n        this.updateQueryParams();\r\n    }\r\n\r\n    private resetPaginationAndFilter(): void {\r\n        this.paginationService.reset();\r\n        this.listings = [];\r\n        this.filterChange$.next();\r\n    }\r\n\r\n    private updateQueryParams(): void {\r\n        const queryParams: any = {};\r\n\r\n        if (this.selectedQuality) queryParams.quality = this.selectedQuality;\r\n        if (this.sortBy !== 'newest') queryParams.sort = this.sortBy;\r\n\r\n        this.router.navigate([], {\r\n            relativeTo: this.route,\r\n            queryParams: queryParams,\r\n            replaceUrl: true\r\n        });\r\n    }\r\n\r\n    // View Management\r\n    setViewMode(mode: ViewMode): void {\r\n        this.viewMode = mode;\r\n    }\r\n\r\n    toggleAdvancedFilters(): void {\r\n        this.showAdvancedFilters = !this.showAdvancedFilters;\r\n    }\r\n\r\n    toggleFavoritesOnly(): void {\r\n        this.showFavoritesOnly = !this.showFavoritesOnly;\r\n        // Would filter listings by favorites here\r\n    }\r\n\r\n    // Search and Discovery\r\n    onSearch(query: string): void {\r\n        this.router.navigate(['/search'], { queryParams: { q: query } });\r\n    }\r\n\r\n    searchByTag(tag: string): void {\r\n        this.router.navigate(['/search'], { queryParams: { q: tag } });\r\n    }\r\n\r\n    shuffleResults(): void {\r\n        // Shuffle current listings for fun discovery\r\n        const shuffled = [...this.listings];\r\n        for (let i = shuffled.length - 1; i > 0; i--) {\r\n            const j = Math.floor(Math.random() * (i + 1));\r\n            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\r\n        }\r\n        this.listings = shuffled;\r\n    }\r\n\r\n    exploreRecommendations(): void {\r\n        // Would show AI-powered recommendations\r\n        this.clearAllFilters();\r\n        this.sortBy = 'popularity';\r\n        this.onSortChange();\r\n    }\r\n\r\n    exploreMoreCategories(): void {\r\n        this.router.navigate(['/categories']);\r\n    }\r\n\r\n    // Item Interactions\r\n    viewListingDetails(id: number): void {\r\n        const listing = this.listings.find(l => l.id === id);\r\n        if (listing) {\r\n            this.router.navigate(['/listing', id], {\r\n                state: { listing: listing }\r\n            });\r\n        } else {\r\n            this.router.navigate(['/listing', id]);\r\n        }\r\n    }\r\n\r\n    onListingHover(listing: Listing): void {\r\n        // Could preload listing details or show preview\r\n    }\r\n\r\n    onListingLeave(): void {\r\n        // Reset any hover states\r\n    }\r\n\r\n    toggleFavorite(id: number, event: Event): void {\r\n        event.stopPropagation();\r\n        if (this.favoriteIds.has(id)) {\r\n            this.favoriteIds.delete(id);\r\n        } else {\r\n            this.favoriteIds.add(id);\r\n        }\r\n        // Would sync with user service\r\n    }\r\n\r\n    shareItem(listing: Listing, event: Event): void {\r\n        event.stopPropagation();\r\n        // Implement sharing functionality\r\n        if (navigator.share) {\r\n            navigator.share({\r\n                title: listing.title,\r\n                text: `Check out this ${listing.quality.toLowerCase()} ${listing.title.toLowerCase()}!`,\r\n                url: window.location.origin + `/listing/${listing.id}`\r\n            });\r\n        }\r\n    }\r\n\r\n    // Pagination\r\n    onScroll(): void {\r\n        if (!this.isLoading && this.paginationService.hasMoreItems) {\r\n            this.paginationService.nextPage();\r\n            this.filterChange$.next();\r\n        }\r\n    }\r\n\r\n    loadMoreManually(): void {\r\n        this.paginationService.nextPage();\r\n        this.filterChange$.next();\r\n    }\r\n\r\n    // Utility Methods\r\n    trackByListingId(index: number, listing: Listing): number {\r\n        return listing.id;\r\n    }\r\n\r\n    isFavorite(id: number): boolean {\r\n        return this.favoriteIds.has(id);\r\n    }\r\n\r\n    getImageUrl(url: string | undefined): string {\r\n        return url || 'assets/images/placeholder.png';\r\n    }\r\n\r\n    getTimeAgo(date: Date): string {\r\n        const now = new Date();\r\n        const diffMs = now.getTime() - new Date(date).getTime();\r\n        const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\r\n\r\n        if (diffDays === 0) return 'Today';\r\n        if (diffDays === 1) return 'Yesterday';\r\n        if (diffDays < 7) return `${diffDays}d ago`;\r\n        return `${Math.floor(diffDays / 7)}w ago`;\r\n    }\r\n\r\n    getQualityClass(quality: string): string {\r\n        return quality.toLowerCase().replace(/\\s+/g, '-');\r\n    }\r\n\r\n    getQualityIcon(quality: string): string {\r\n        const icons = {\r\n            'NEW': 'fas fa-star',\r\n            'LIKE NEW': 'fas fa-gem',\r\n            'BARELY WORN': 'fas fa-heart',\r\n            'USED': 'fas fa-leaf'\r\n        };\r\n        return icons[quality as keyof typeof icons] || 'fas fa-tag';\r\n    }\r\n\r\n    getQualityLabel(value: string): string {\r\n        const quality = this.qualities.find(q => q.value === value);\r\n        return quality ? quality.label : value;\r\n    }\r\n\r\n    getQualityCount(quality: string): number {\r\n        const qualityOption = this.qualities.find(q => q.value === quality);\r\n        return qualityOption ? qualityOption.count || 0 : 0;\r\n    }\r\n\r\n    getCategoryLabel(value: string): string {\r\n        const category = this.categories.find(c => c.value === value);\r\n        return category ? category.label : value;\r\n    }\r\n\r\n    getListingPreview(listing: Listing): string {\r\n        if (listing.description && listing.description.length > 0) {\r\n            return listing.description.substring(0, 120) + '...';\r\n        }\r\n        return `This ${listing.quality.toLowerCase()} ${listing.title.toLowerCase()} is ready for its next adventure.`;\r\n    }\r\n\r\n    getStoryExcerpt(listing: Listing): string {\r\n        if (listing.description && listing.description.length > 0) {\r\n            return listing.description.substring(0, 80) + '...';\r\n        }\r\n        return `A beautiful ${listing.quality.toLowerCase()} piece with character and style.`;\r\n    }\r\n\r\n    getResultsTitle(): string {\r\n        if (this.hasActiveFilters) {\r\n            return 'Filtered Discoveries';\r\n        }\r\n        return 'Latest Marketplace Treasures';\r\n    }\r\n\r\n    getActiveFiltersCount(): number {\r\n        let count = 0;\r\n        if (this.selectedQuality) count++;\r\n        if (this.selectedSizes.length > 0) count++;\r\n        if (this.selectedCategories.length > 0) count++;\r\n        if (this.priceRange.min > 0 || this.priceRange.max < 500) count++;\r\n        if (this.sortBy !== 'newest') count++;\r\n        return count;\r\n    }\r\n\r\n    calculateSustainabilityScore(): number {\r\n        // Mock calculation based on filters and selections\r\n        let score = 75; // Base sustainability score\r\n        if (this.selectedQuality === 'USED') score += 15;\r\n        if (this.selectedQuality === 'BARELY WORN') score += 10;\r\n        if (this.selectedCategories.includes('sustainable')) score += 10;\r\n        return Math.min(score, 100);\r\n    }\r\n\r\n    get hasActiveFilters(): boolean {\r\n        return this.getActiveFiltersCount() > 0;\r\n    }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}