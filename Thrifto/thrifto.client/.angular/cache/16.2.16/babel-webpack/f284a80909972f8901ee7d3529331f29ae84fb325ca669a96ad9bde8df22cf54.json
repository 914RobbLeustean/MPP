{"ast":null,"code":"import { SearchBarComponent } from '../../components/shared/search-bar/search-bar.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/listing.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../shared/search-bar/search-bar.component\";\nimport * as i5 from \"../shared/listing-item/listing-item.component\";\nfunction SearchComponent_h1_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Search Results for \\\"\", ctx_r0.searchQuery, \"\\\"\");\n  }\n}\nfunction SearchComponent_h1_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵtext(1, \"Search\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SearchComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 8);\n  }\n}\nfunction SearchComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function SearchComponent_div_6_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.clearSearch());\n    });\n    i0.ɵɵtext(4, \"Clear Search\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"No listings found matching \\\"\", ctx_r3.searchQuery, \"\\\".\");\n  }\n}\nfunction SearchComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"p\");\n    i0.ɵɵtext(2, \"Enter a search term above to find listings.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction SearchComponent_div_8_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"app-listing-item\", 17);\n    i0.ɵɵlistener(\"click\", function SearchComponent_div_8_div_5_Template_app_listing_item_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const listing_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.viewListingDetails(listing_r9.id));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const listing_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"listing\", listing_r9);\n  }\n}\nfunction SearchComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13)(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 14);\n    i0.ɵɵtemplate(5, SearchComponent_div_8_div_5_Template, 2, 1, \"div\", 15);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"Found \", ctx_r5.searchResults.length, \" \", ctx_r5.searchResults.length === 1 ? \"listing\" : \"listings\", \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.searchResults);\n  }\n}\nexport class SearchComponent {\n  constructor(route, router, listingService) {\n    this.route = route;\n    this.router = router;\n    this.listingService = listingService;\n    this.searchQuery = '';\n    this.searchResults = [];\n    this.isLoading = true;\n  }\n  ngOnInit() {\n    this.route.queryParams.subscribe(params => {\n      if (params['q']) {\n        this.searchQuery = params['q'];\n        this.performSearch();\n      } else {\n        this.searchQuery = '';\n        this.searchResults = [];\n        this.isLoading = false;\n      }\n    });\n  }\n  performSearch() {\n    this.isLoading = true;\n    this.listingService.searchListings(this.searchQuery).subscribe({\n      next: results => {\n        this.searchResults = results;\n        this.isLoading = false;\n      },\n      error: error => {\n        console.error('Error performing search:', error);\n        this.isLoading = false;\n      }\n    });\n  }\n  onSearchUpdate(query) {\n    // Navigate with the search query as a parameter\n    if (query && query.trim()) {\n      this.router.navigate(['/search'], {\n        queryParams: {\n          q: query\n        }\n      });\n    } else {\n      this.clearSearch();\n    }\n  }\n  clearSearch() {\n    // Reset search state\n    this.searchQuery = '';\n    this.searchResults = [];\n    // Navigate to clear the URL parameters\n    this.router.navigate(['/search'], {\n      queryParams: {}\n    }).then(() => {\n      // If searchBarComponent is available after view is initialized\n      if (this.searchBarComponent) {\n        // Reset the search bar directly using the component reference\n        this.searchBarComponent.resetSearch();\n      }\n    });\n  }\n  viewListingDetails(id) {\n    this.router.navigate(['/listing', id]);\n  }\n  static {\n    this.ɵfac = function SearchComponent_Factory(t) {\n      return new (t || SearchComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ListingService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SearchComponent,\n      selectors: [[\"app-search\"]],\n      viewQuery: function SearchComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(SearchBarComponent, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchBarComponent = _t.first);\n        }\n      },\n      decls: 9,\n      vars: 7,\n      consts: [[1, \"container\"], [1, \"search-header\"], [4, \"ngIf\"], [3, \"initialValue\", \"searchQuery\"], [\"class\", \"loading-spinner\", 4, \"ngIf\"], [\"class\", \"no-results\", 4, \"ngIf\"], [\"class\", \"search-prompt\", 4, \"ngIf\"], [\"class\", \"search-results\", 4, \"ngIf\"], [1, \"loading-spinner\"], [1, \"no-results\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"search-prompt\"], [1, \"search-results\"], [1, \"results-count\"], [1, \"listings-grid\"], [\"class\", \"listing-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"listing-card\"], [3, \"listing\", \"click\"]],\n      template: function SearchComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n          i0.ɵɵtemplate(2, SearchComponent_h1_2_Template, 2, 1, \"h1\", 2);\n          i0.ɵɵtemplate(3, SearchComponent_h1_3_Template, 2, 0, \"h1\", 2);\n          i0.ɵɵelementStart(4, \"app-search-bar\", 3);\n          i0.ɵɵlistener(\"searchQuery\", function SearchComponent_Template_app_search_bar_searchQuery_4_listener($event) {\n            return ctx.onSearchUpdate($event);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(5, SearchComponent_div_5_Template, 1, 0, \"div\", 4);\n          i0.ɵɵtemplate(6, SearchComponent_div_6_Template, 5, 1, \"div\", 5);\n          i0.ɵɵtemplate(7, SearchComponent_div_7_Template, 3, 0, \"div\", 6);\n          i0.ɵɵtemplate(8, SearchComponent_div_8_Template, 6, 3, \"div\", 7);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.searchQuery);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.searchQuery);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"initialValue\", ctx.searchQuery);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.searchResults.length === 0 && ctx.searchQuery);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && !ctx.searchQuery);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.searchResults.length > 0);\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf, i4.SearchBarComponent, i5.ListingItemComponent],\n      styles: [\"\\n\\n.container[_ngcontent-%COMP%] {\\n  max-width: 1200px;\\n  margin: 0 auto;\\n  padding: 40px 20px;\\n}\\n\\n.search-header[_ngcontent-%COMP%] {\\n  margin-bottom: 30px;\\n}\\n.search-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n  font-size: 28px;\\n  margin-bottom: 20px;\\n  color: #333;\\n}\\n\\n.loading-spinner[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  padding: 40px 0;\\n}\\n.loading-spinner[_ngcontent-%COMP%]:after {\\n  content: \\\"\\\";\\n  width: 40px;\\n  height: 40px;\\n  border: 4px solid #f3f3f3;\\n  border-top: 4px solid #a83939;\\n  border-radius: 50%;\\n  animation: _ngcontent-%COMP%_spin 1s linear infinite;\\n}\\n\\n.no-results[_ngcontent-%COMP%], .search-prompt[_ngcontent-%COMP%] {\\n  text-align: center;\\n  padding: 60px 0;\\n  background-color: white;\\n  border-radius: 8px;\\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\\n}\\n.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .search-prompt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  margin-bottom: 20px;\\n  color: #666;\\n  font-size: 18px;\\n}\\n.no-results[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%], .search-prompt[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%] {\\n  background-color: #a83939;\\n  color: white;\\n  border: none;\\n  padding: 10px 20px;\\n  border-radius: 4px;\\n  cursor: pointer;\\n}\\n.no-results[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover, .search-prompt[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover {\\n  background-color: #822c2c;\\n}\\n\\n.search-results[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%] {\\n  margin-bottom: 20px;\\n  padding: 10px 0;\\n  color: #666;\\n}\\n.search-results[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n.search-results[_ngcontent-%COMP%]   .listings-grid[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: repeat(4, 1fr);\\n  gap: 20px;\\n}\\n@media (max-width: 992px) {\\n  .search-results[_ngcontent-%COMP%]   .listings-grid[_ngcontent-%COMP%] {\\n    grid-template-columns: repeat(3, 1fr);\\n  }\\n}\\n@media (max-width: 768px) {\\n  .search-results[_ngcontent-%COMP%]   .listings-grid[_ngcontent-%COMP%] {\\n    grid-template-columns: repeat(2, 1fr);\\n  }\\n}\\n@media (max-width: 576px) {\\n  .search-results[_ngcontent-%COMP%]   .listings-grid[_ngcontent-%COMP%] {\\n    grid-template-columns: 1fr;\\n  }\\n}\\n.search-results[_ngcontent-%COMP%]   .listings-grid[_ngcontent-%COMP%]   .listing-card[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n}\\n\\n@keyframes _ngcontent-%COMP%_spin {\\n  0% {\\n    transform: rotate(0deg);\\n  }\\n  100% {\\n    transform: rotate(360deg);\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9zZWFyY2gvc2VhcmNoLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG9EQUFBO0FBQ0E7RUFDRSxpQkFBQTtFQUNBLGNBQUE7RUFDQSxrQkFBQTtBQUNGOztBQUVBO0VBQ0UsbUJBQUE7QUFDRjtBQUNFO0VBQ0UsZUFBQTtFQUNBLG1CQUFBO0VBQ0EsV0FBQTtBQUNKOztBQUdBO0VBQ0UsYUFBQTtFQUNBLHVCQUFBO0VBQ0EsZUFBQTtBQUFGO0FBRUU7RUFDRSxXQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSx5QkFBQTtFQUNBLDZCQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQ0FBQTtBQUFKOztBQUlBO0VBQ0Usa0JBQUE7RUFDQSxlQUFBO0VBQ0EsdUJBQUE7RUFDQSxrQkFBQTtFQUNBLHlDQUFBO0FBREY7QUFHRTtFQUNFLG1CQUFBO0VBQ0EsV0FBQTtFQUNBLGVBQUE7QUFESjtBQUlFO0VBQ0UseUJBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0FBRko7QUFJSTtFQUNFLHlCQUFBO0FBRk47O0FBUUU7RUFDRSxtQkFBQTtFQUNBLGVBQUE7RUFDQSxXQUFBO0FBTEo7QUFPSTtFQUNFLFNBQUE7QUFMTjtBQVNFO0VBQ0UsYUFBQTtFQUNBLHFDQUFBO0VBQ0EsU0FBQTtBQVBKO0FBU0k7RUFMRjtJQU1JLHFDQUFBO0VBTko7QUFDRjtBQVFJO0VBVEY7SUFVSSxxQ0FBQTtFQUxKO0FBQ0Y7QUFPSTtFQWJGO0lBY0ksMEJBQUE7RUFKSjtBQUNGO0FBTUk7RUFDRSxlQUFBO0FBSk47O0FBU0E7RUFDRTtJQUNFLHVCQUFBO0VBTkY7RUFTQTtJQUNFLHlCQUFBO0VBUEY7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qIHNyYy9hcHAvY29tcG9uZW50cy9zZWFyY2gvc2VhcmNoLmNvbXBvbmVudC5zY3NzICovXHJcbi5jb250YWluZXIge1xyXG4gIG1heC13aWR0aDogMTIwMHB4O1xyXG4gIG1hcmdpbjogMCBhdXRvO1xyXG4gIHBhZGRpbmc6IDQwcHggMjBweDtcclxufVxyXG5cclxuLnNlYXJjaC1oZWFkZXIge1xyXG4gIG1hcmdpbi1ib3R0b206IDMwcHg7XHJcblxyXG4gIGgxIHtcclxuICAgIGZvbnQtc2l6ZTogMjhweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgICBjb2xvcjogIzMzMztcclxuICB9XHJcbn1cclxuXHJcbi5sb2FkaW5nLXNwaW5uZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgcGFkZGluZzogNDBweCAwO1xyXG5cclxuICAmOmFmdGVyIHtcclxuICAgIGNvbnRlbnQ6ICcnO1xyXG4gICAgd2lkdGg6IDQwcHg7XHJcbiAgICBoZWlnaHQ6IDQwcHg7XHJcbiAgICBib3JkZXI6IDRweCBzb2xpZCAjZjNmM2YzO1xyXG4gICAgYm9yZGVyLXRvcDogNHB4IHNvbGlkICNhODM5Mzk7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xyXG4gIH1cclxufVxyXG5cclxuLm5vLXJlc3VsdHMsIC5zZWFyY2gtcHJvbXB0IHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgcGFkZGluZzogNjBweCAwO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLCAwLCAwLCAwLjA1KTtcclxuXHJcbiAgcCB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG4gICAgY29sb3I6ICM2NjY7XHJcbiAgICBmb250LXNpemU6IDE4cHg7XHJcbiAgfVxyXG5cclxuICAuYnRuLXByaW1hcnkge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2E4MzkzOTtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuXHJcbiAgICAmOmhvdmVyIHtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogZGFya2VuKCNhODM5MzksIDEwJSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4uc2VhcmNoLXJlc3VsdHMge1xyXG4gIC5yZXN1bHRzLWNvdW50IHtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4IDA7XHJcbiAgICBjb2xvcjogIzY2NjtcclxuXHJcbiAgICBwIHtcclxuICAgICAgbWFyZ2luOiAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLmxpc3RpbmdzLWdyaWQge1xyXG4gICAgZGlzcGxheTogZ3JpZDtcclxuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDQsIDFmcik7XHJcbiAgICBnYXA6IDIwcHg7XHJcblxyXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDk5MnB4KSB7XHJcbiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDMsIDFmcik7XHJcbiAgICB9XHJcblxyXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XHJcbiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDIsIDFmcik7XHJcbiAgICB9XHJcblxyXG4gICAgQG1lZGlhIChtYXgtd2lkdGg6IDU3NnB4KSB7XHJcbiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xyXG4gICAgfVxyXG5cclxuICAgIC5saXN0aW5nLWNhcmQge1xyXG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIHNwaW4ge1xyXG4gIDAlIHtcclxuICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xyXG4gIH1cclxuXHJcbiAgMTAwJSB7XHJcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["SearchBarComponent","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","searchQuery","ɵɵelement","ɵɵlistener","SearchComponent_div_6_Template_button_click_3_listener","ɵɵrestoreView","_r7","ctx_r6","ɵɵnextContext","ɵɵresetView","clearSearch","ctx_r3","SearchComponent_div_8_div_5_Template_app_listing_item_click_1_listener","restoredCtx","_r11","listing_r9","$implicit","ctx_r10","viewListingDetails","id","ɵɵproperty","ɵɵtemplate","SearchComponent_div_8_div_5_Template","ɵɵtextInterpolate2","ctx_r5","searchResults","length","SearchComponent","constructor","route","router","listingService","isLoading","ngOnInit","queryParams","subscribe","params","performSearch","searchListings","next","results","error","console","onSearchUpdate","query","trim","navigate","q","then","searchBarComponent","resetSearch","ɵɵdirectiveInject","i1","ActivatedRoute","Router","i2","ListingService","selectors","viewQuery","SearchComponent_Query","rf","ctx","SearchComponent_h1_2_Template","SearchComponent_h1_3_Template","SearchComponent_Template_app_search_bar_searchQuery_4_listener","$event","SearchComponent_div_5_Template","SearchComponent_div_6_Template","SearchComponent_div_7_Template","SearchComponent_div_8_Template"],"sources":["C:\\Users\\leust\\source\\repos\\MPP-main\\Thrifto\\thrifto.client\\src\\app\\components\\search\\search.component.ts","C:\\Users\\leust\\source\\repos\\MPP-main\\Thrifto\\thrifto.client\\src\\app\\components\\search\\search.component.html"],"sourcesContent":["// src/app/components/search/search.component.ts\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ListingService } from '../../services/listing.service';\r\nimport { Listing } from '../../models/listing.model';\r\nimport { SearchBarComponent } from '../../components/shared/search-bar/search-bar.component';\r\n\r\n@Component({\r\n  selector: 'app-search',\r\n  templateUrl: './search.component.html',\r\n  styleUrls: ['./search.component.scss']\r\n})\r\nexport class SearchComponent implements OnInit {\r\n  @ViewChild(SearchBarComponent) searchBarComponent!: SearchBarComponent;\r\n\r\n  searchQuery: string = '';\r\n  searchResults: Listing[] = [];\r\n  isLoading: boolean = true;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private listingService: ListingService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.route.queryParams.subscribe(params => {\r\n      if (params['q']) {\r\n        this.searchQuery = params['q'];\r\n        this.performSearch();\r\n      } else {\r\n        this.searchQuery = '';\r\n        this.searchResults = [];\r\n        this.isLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  performSearch(): void {\r\n    this.isLoading = true;\r\n    this.listingService.searchListings(this.searchQuery).subscribe({\r\n      next: (results) => {\r\n        this.searchResults = results;\r\n        this.isLoading = false;\r\n      },\r\n      error: (error) => {\r\n        console.error('Error performing search:', error);\r\n        this.isLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  onSearchUpdate(query: string): void {\r\n    // Navigate with the search query as a parameter\r\n    if (query && query.trim()) {\r\n      this.router.navigate(['/search'], { queryParams: { q: query } });\r\n    } else {\r\n      this.clearSearch();\r\n    }\r\n  }\r\n\r\n  clearSearch(): void {\r\n    // Reset search state\r\n    this.searchQuery = '';\r\n    this.searchResults = [];\r\n\r\n    // Navigate to clear the URL parameters\r\n    this.router.navigate(['/search'], { queryParams: {} }).then(() => {\r\n      // If searchBarComponent is available after view is initialized\r\n      if (this.searchBarComponent) {\r\n        // Reset the search bar directly using the component reference\r\n        this.searchBarComponent.resetSearch();\r\n      }\r\n    });\r\n  }\r\n\r\n  viewListingDetails(id: number): void {\r\n    this.router.navigate(['/listing', id]);\r\n  }\r\n}\r\n","<!-- src/app/components/search/search.component.html -->\r\n<div class=\"container\">\r\n  <div class=\"search-header\">\r\n    <h1 *ngIf=\"searchQuery\">Search Results for \"{{ searchQuery }}\"</h1>\r\n    <h1 *ngIf=\"!searchQuery\">Search</h1>\r\n\r\n    <app-search-bar [initialValue]=\"searchQuery\"\r\n                    (searchQuery)=\"onSearchUpdate($event)\">\r\n    </app-search-bar>\r\n  </div>\r\n\r\n  <div class=\"loading-spinner\" *ngIf=\"isLoading\"></div>\r\n\r\n  <div class=\"no-results\" *ngIf=\"!isLoading && searchResults.length === 0 && searchQuery\">\r\n    <p>No listings found matching \"{{ searchQuery }}\".</p>\r\n    <button class=\"btn btn-primary\" (click)=\"clearSearch()\">Clear Search</button>\r\n  </div>\r\n\r\n  <div class=\"search-prompt\" *ngIf=\"!isLoading && !searchQuery\">\r\n    <p>Enter a search term above to find listings.</p>\r\n  </div>\r\n\r\n  <div class=\"search-results\" *ngIf=\"!isLoading && searchResults.length > 0\">\r\n    <div class=\"results-count\">\r\n      <p>Found {{ searchResults.length }} {{ searchResults.length === 1 ? 'listing' : 'listings' }}</p>\r\n    </div>\r\n\r\n    <div class=\"listings-grid\">\r\n      <div class=\"listing-card\" *ngFor=\"let listing of searchResults\">\r\n        <app-listing-item [listing]=\"listing\" (click)=\"viewListingDetails(listing.id)\"></app-listing-item>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}