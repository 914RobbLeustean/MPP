{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../../services/notification.service\";\nimport * as i5 from \"@angular/common\";\nfunction LoginComponent_div_9_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Email is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_9_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Please enter a valid email\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, LoginComponent_div_9_div_1_Template, 2, 0, \"div\", 14);\n    i0.ɵɵtemplate(2, LoginComponent_div_9_div_2_Template, 2, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.f[\"email\"].errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.f[\"email\"].errors[\"email\"]);\n  }\n}\nfunction LoginComponent_div_14_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Password is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, LoginComponent_div_14_div_1_Template, 2, 0, \"div\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.f[\"password\"].errors[\"required\"]);\n  }\n}\nfunction LoginComponent_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 15);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\nexport class LoginComponent {\n  constructor(formBuilder, authService, router, route, notificationService) {\n    this.formBuilder = formBuilder;\n    this.authService = authService;\n    this.router = router;\n    this.route = route;\n    this.notificationService = notificationService;\n    this.isSubmitting = false;\n    this.returnUrl = '/';\n    // Redirect if already logged in\n    if (this.authService.isLoggedIn()) {\n      this.router.navigate(['/']);\n    }\n    this.loginForm = this.formBuilder.group({\n      email: ['', [Validators.required, Validators.email]],\n      password: ['', Validators.required]\n    });\n  }\n  ngOnInit() {\n    // Get return url from route parameters or default to '/'\n    this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\n  }\n  // Getter for easy access to form fields\n  get f() {\n    return this.loginForm.controls;\n  }\n  onSubmit() {\n    // Stop here if form is invalid\n    if (this.loginForm.invalid) {\n      return;\n    }\n    this.isSubmitting = true;\n    this.authService.login(this.f['email'].value, this.f['password'].value).subscribe({\n      next: () => {\n        this.notificationService.show('Login successful', 'success');\n        this.router.navigate([this.returnUrl]);\n      },\n      error: error => {\n        this.isSubmitting = false;\n        this.notificationService.show(error.error?.message || 'Login failed', 'error');\n      }\n    });\n  }\n  static {\n    this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.NotificationService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 23,\n      vars: 11,\n      consts: [[1, \"auth-container\"], [1, \"auth-card\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"formControlName\", \"email\", \"placeholder\", \"your@email.com\", 1, \"form-control\", 3, \"ngClass\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"for\", \"password\"], [\"type\", \"password\", \"id\", \"password\", \"formControlName\", \"password\", \"placeholder\", \"Enter your password\", 1, \"form-control\", 3, \"ngClass\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"class\", \"spinner-border spinner-border-sm mr-1\", 4, \"ngIf\"], [1, \"auth-footer\"], [\"routerLink\", \"/register\"], [1, \"invalid-feedback\"], [4, \"ngIf\"], [1, \"spinner-border\", \"spinner-border-sm\", \"mr-1\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n          i0.ɵɵtext(3, \"Login to Thrifto\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"form\", 2);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_4_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(5, \"div\", 3)(6, \"label\", 4);\n          i0.ɵɵtext(7, \"Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(8, \"input\", 5);\n          i0.ɵɵtemplate(9, LoginComponent_div_9_Template, 3, 2, \"div\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 3)(11, \"label\", 7);\n          i0.ɵɵtext(12, \"Password\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(13, \"input\", 8);\n          i0.ɵɵtemplate(14, LoginComponent_div_14_Template, 2, 1, \"div\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"button\", 9);\n          i0.ɵɵtemplate(16, LoginComponent_span_16_Template, 1, 0, \"span\", 10);\n          i0.ɵɵtext(17, \" Login \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(18, \"div\", 11)(19, \"p\");\n          i0.ɵɵtext(20, \"Don't have an account? \");\n          i0.ɵɵelementStart(21, \"a\", 12);\n          i0.ɵɵtext(22, \"Register here\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, ctx.f[\"email\"].touched && ctx.f[\"email\"].errors));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.f[\"email\"].touched && ctx.f[\"email\"].errors);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(9, _c0, ctx.f[\"password\"].touched && ctx.f[\"password\"].errors));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.f[\"password\"].touched && ctx.f[\"password\"].errors);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"disabled\", ctx.loginForm.invalid || ctx.isSubmitting);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isSubmitting);\n        }\n      },\n      dependencies: [i5.NgClass, i5.NgIf, i3.RouterLink, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\"\\n\\n.auth-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  min-height: calc(100vh - 60px - 200px);\\n  padding: 40px 20px;\\n  background-color: #f5f5f5;\\n}\\n\\n.auth-card[_ngcontent-%COMP%] {\\n  background-color: white;\\n  border-radius: 8px;\\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\\n  padding: 30px;\\n  width: 100%;\\n  max-width: 400px;\\n}\\n.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-bottom: 30px;\\n  color: #333;\\n}\\n.auth-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%] {\\n  margin-bottom: 20px;\\n}\\n.auth-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\n  display: block;\\n  margin-bottom: 8px;\\n  font-weight: 500;\\n}\\n.auth-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 10px 12px;\\n  border: 1px solid #ddd;\\n  border-radius: 4px;\\n  font-size: 16px;\\n}\\n.auth-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n  border-color: #a83939;\\n}\\n.auth-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%] {\\n  border-color: #f44336;\\n}\\n.auth-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%] {\\n  color: #f44336;\\n  font-size: 14px;\\n  margin-top: 5px;\\n}\\n.auth-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] {\\n  display: block;\\n  width: 100%;\\n  padding: 12px;\\n  background-color: #a83939;\\n  color: white;\\n  border: none;\\n  border-radius: 4px;\\n  font-size: 16px;\\n  cursor: pointer;\\n  transition: background-color 0.2s;\\n}\\n.auth-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover {\\n  background-color: #822c2c;\\n}\\n.auth-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled {\\n  background-color: #ccc;\\n  cursor: not-allowed;\\n}\\n.auth-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  width: 1rem;\\n  height: 1rem;\\n  border: 0.2em solid currentColor;\\n  border-right-color: transparent;\\n  border-radius: 50%;\\n  animation: _ngcontent-%COMP%_spinner-border 0.75s linear infinite;\\n  margin-right: 8px;\\n}\\n.auth-card[_ngcontent-%COMP%]   .auth-footer[_ngcontent-%COMP%] {\\n  margin-top: 20px;\\n  text-align: center;\\n}\\n.auth-card[_ngcontent-%COMP%]   .auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  color: #666;\\n  font-size: 14px;\\n}\\n.auth-card[_ngcontent-%COMP%]   .auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  color: #a83939;\\n  text-decoration: none;\\n}\\n.auth-card[_ngcontent-%COMP%]   .auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n  text-decoration: underline;\\n}\\n@keyframes _ngcontent-%COMP%_spinner-border {\\n  to {\\n    transform: rotate(360deg);\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9hdXRoL2xvZ2luL2xvZ2luLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHVEQUFBO0FBQ0E7RUFDRSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLHNDQUFBO0VBQ0Esa0JBQUE7RUFDQSx5QkFBQTtBQUNGOztBQUVBO0VBQ0UsdUJBQUE7RUFDQSxrQkFBQTtFQUNBLHlDQUFBO0VBQ0EsYUFBQTtFQUNBLFdBQUE7RUFDQSxnQkFBQTtBQUNGO0FBQ0U7RUFDRSxrQkFBQTtFQUNBLG1CQUFBO0VBQ0EsV0FBQTtBQUNKO0FBRUU7RUFDRSxtQkFBQTtBQUFKO0FBRUk7RUFDRSxjQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtBQUFOO0FBR0k7RUFDRSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtBQUROO0FBR007RUFDRSxhQUFBO0VBQ0EscUJBQUE7QUFEUjtBQUlNO0VBQ0UscUJBQUE7QUFGUjtBQU1JO0VBQ0UsY0FBQTtFQUNBLGVBQUE7RUFDQSxlQUFBO0FBSk47QUFRRTtFQUNFLGNBQUE7RUFDQSxXQUFBO0VBQ0EsYUFBQTtFQUNBLHlCQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGVBQUE7RUFDQSxlQUFBO0VBQ0EsaUNBQUE7QUFOSjtBQVFJO0VBQ0UseUJBQUE7QUFOTjtBQVNJO0VBQ0Usc0JBQUE7RUFDQSxtQkFBQTtBQVBOO0FBVUk7RUFDRSxxQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsZ0NBQUE7RUFDQSwrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsK0NBQUE7RUFDQSxpQkFBQTtBQVJOO0FBWUU7RUFDRSxnQkFBQTtFQUNBLGtCQUFBO0FBVko7QUFZSTtFQUNFLFdBQUE7RUFDQSxlQUFBO0FBVk47QUFZTTtFQUNFLGNBQUE7RUFDQSxxQkFBQTtBQVZSO0FBWVE7RUFDRSwwQkFBQTtBQVZWO0FBZ0JFO0VBQ0U7SUFDRSx5QkFBQTtFQWRKO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBzcmMvYXBwL2NvbXBvbmVudHMvYXV0aC9sb2dpbi9sb2dpbi5jb21wb25lbnQuc2NzcyAqL1xyXG4uYXV0aC1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBtaW4taGVpZ2h0OiBjYWxjKDEwMHZoIC0gNjBweCAtIDIwMHB4KTsgLy8gU3VidHJhY3QgaGVhZGVyIGFuZCBmb290ZXIgaGVpZ2h0XHJcbiAgcGFkZGluZzogNDBweCAyMHB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7XHJcbn1cclxuXHJcbi5hdXRoLWNhcmQge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxuICBwYWRkaW5nOiAzMHB4O1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIG1heC13aWR0aDogNDAwcHg7XHJcblxyXG4gIGgyIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XHJcbiAgICBjb2xvcjogIzMzMztcclxuICB9XHJcblxyXG4gIC5mb3JtLWdyb3VwIHtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcblxyXG4gICAgbGFiZWwge1xyXG4gICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xyXG4gICAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgfVxyXG5cclxuICAgIC5mb3JtLWNvbnRyb2wge1xyXG4gICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgcGFkZGluZzogMTBweCAxMnB4O1xyXG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xyXG4gICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgIGZvbnQtc2l6ZTogMTZweDtcclxuXHJcbiAgICAgICY6Zm9jdXMge1xyXG4gICAgICAgIG91dGxpbmU6IG5vbmU7XHJcbiAgICAgICAgYm9yZGVyLWNvbG9yOiAjYTgzOTM5O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAmLmlzLWludmFsaWQge1xyXG4gICAgICAgIGJvcmRlci1jb2xvcjogI2Y0NDMzNjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC5pbnZhbGlkLWZlZWRiYWNrIHtcclxuICAgICAgY29sb3I6ICNmNDQzMzY7XHJcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgICAgbWFyZ2luLXRvcDogNXB4O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLmJ0biB7XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgcGFkZGluZzogMTJweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNhODM5Mzk7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XHJcblxyXG4gICAgJjpob3ZlciB7XHJcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IGRhcmtlbigjYTgzOTM5LCAxMCUpO1xyXG4gICAgfVxyXG5cclxuICAgICY6ZGlzYWJsZWQge1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjO1xyXG4gICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xyXG4gICAgfVxyXG5cclxuICAgIC5zcGlubmVyLWJvcmRlciB7XHJcbiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgICAgd2lkdGg6IDFyZW07XHJcbiAgICAgIGhlaWdodDogMXJlbTtcclxuICAgICAgYm9yZGVyOiAwLjJlbSBzb2xpZCBjdXJyZW50Q29sb3I7XHJcbiAgICAgIGJvcmRlci1yaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgICAgYW5pbWF0aW9uOiBzcGlubmVyLWJvcmRlciAuNzVzIGxpbmVhciBpbmZpbml0ZTtcclxuICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAuYXV0aC1mb290ZXIge1xyXG4gICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuXHJcbiAgICBwIHtcclxuICAgICAgY29sb3I6ICM2NjY7XHJcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcclxuXHJcbiAgICAgIGEge1xyXG4gICAgICAgIGNvbG9yOiAjYTgzOTM5O1xyXG4gICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuXHJcbiAgICAgICAgJjpob3ZlciB7XHJcbiAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBrZXlmcmFtZXMgc3Bpbm5lci1ib3JkZXIge1xyXG4gICAgdG8ge1xyXG4gICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","LoginComponent_div_9_div_1_Template","LoginComponent_div_9_div_2_Template","ɵɵadvance","ɵɵproperty","ctx_r0","f","errors","LoginComponent_div_14_div_1_Template","ctx_r1","ɵɵelement","LoginComponent","constructor","formBuilder","authService","router","route","notificationService","isSubmitting","returnUrl","isLoggedIn","navigate","loginForm","group","email","required","password","ngOnInit","snapshot","queryParams","controls","onSubmit","invalid","login","value","subscribe","next","show","error","message","ɵɵdirectiveInject","i1","FormBuilder","i2","AuthService","i3","Router","ActivatedRoute","i4","NotificationService","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵlistener","LoginComponent_Template_form_ngSubmit_4_listener","LoginComponent_div_9_Template","LoginComponent_div_14_Template","LoginComponent_span_16_Template","ɵɵpureFunction1","_c0","touched"],"sources":["C:\\Users\\leust\\source\\repos\\MPP-main\\Thrifto\\thrifto.client\\src\\app\\components\\auth\\login\\login.component.ts","C:\\Users\\leust\\source\\repos\\MPP-main\\Thrifto\\thrifto.client\\src\\app\\components\\auth\\login\\login.component.html"],"sourcesContent":["// src/app/components/auth/login/login.component.ts\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { AuthService } from '../../../services/auth.service';\r\nimport { NotificationService } from '../../../services/notification.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n  loginForm: FormGroup;\r\n  isSubmitting = false;\r\n  returnUrl: string = '/';\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private notificationService: NotificationService\r\n  ) {\r\n    // Redirect if already logged in\r\n    if (this.authService.isLoggedIn()) {\r\n      this.router.navigate(['/']);\r\n    }\r\n\r\n    this.loginForm = this.formBuilder.group({\r\n      email: ['', [Validators.required, Validators.email]],\r\n      password: ['', Validators.required]\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // Get return url from route parameters or default to '/'\r\n    this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\r\n  }\r\n\r\n  // Getter for easy access to form fields\r\n  get f() { return this.loginForm.controls; }\r\n\r\n  onSubmit(): void {\r\n    // Stop here if form is invalid\r\n    if (this.loginForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.isSubmitting = true;\r\n    this.authService.login(this.f['email'].value, this.f['password'].value)\r\n      .subscribe({\r\n        next: () => {\r\n          this.notificationService.show('Login successful', 'success');\r\n          this.router.navigate([this.returnUrl]);\r\n        },\r\n        error: error => {\r\n          this.isSubmitting = false;\r\n          this.notificationService.show(error.error?.message || 'Login failed', 'error');\r\n        }\r\n      });\r\n  }\r\n}\r\n","<!-- src/app/components/auth/login/login.component.html -->\r\n<div class=\"auth-container\">\r\n  <div class=\"auth-card\">\r\n    <h2>Login to Thrifto</h2>\r\n\r\n    <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\r\n      <div class=\"form-group\">\r\n        <label for=\"email\">Email</label>\r\n        <input type=\"email\"\r\n               id=\"email\"\r\n               formControlName=\"email\"\r\n               class=\"form-control\"\r\n               [ngClass]=\"{ 'is-invalid': f['email'].touched && f['email'].errors }\"\r\n               placeholder=\"your@email.com\">\r\n        <div *ngIf=\"f['email'].touched && f['email'].errors\" class=\"invalid-feedback\">\r\n          <div *ngIf=\"f['email'].errors['required']\">Email is required</div>\r\n          <div *ngIf=\"f['email'].errors['email']\">Please enter a valid email</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"password\">Password</label>\r\n        <input type=\"password\"\r\n               id=\"password\"\r\n               formControlName=\"password\"\r\n               class=\"form-control\"\r\n               [ngClass]=\"{ 'is-invalid': f['password'].touched && f['password'].errors }\"\r\n               placeholder=\"Enter your password\">\r\n        <div *ngIf=\"f['password'].touched && f['password'].errors\" class=\"invalid-feedback\">\r\n          <div *ngIf=\"f['password'].errors['required']\">Password is required</div>\r\n        </div>\r\n      </div>\r\n\r\n      <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"loginForm.invalid || isSubmitting\">\r\n        <span *ngIf=\"isSubmitting\" class=\"spinner-border spinner-border-sm mr-1\"></span>\r\n        Login\r\n      </button>\r\n    </form>\r\n\r\n    <div class=\"auth-footer\">\r\n      <p>Don't have an account? <a routerLink=\"/register\">Register here</a></p>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}